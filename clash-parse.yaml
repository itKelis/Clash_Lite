mixed-port: 7890
#redir-port: 7892
allow-lan: true
bind-address: "*"
routing-mark: 6666
mode: rule
ipv6: false
udp: true
log-level: info
external-controller: 0.0.0.0:9090
secret: 26bcc253-c75d-438a-874d-6e0344843bda
dns:
  enable: true 
  ipv6: false
  #listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true
  default-nameserver:
    - '221.179.38.7'
    #- 223.5.5.5
    #- 119.29.29.29
  nameserver:
    - 'dot.360.cn'
    - 'doh.pub'
    - 'dns.alidns.com'
    #- '180.76.76.76'
    - '114.114.114.114'
     #- 223.5.5.5
     #- 119.29.29.29
     #- dhcp://en0
#  fallback:
#    - tls:223.5.5.5:853
#    - tcp://223.5.5.5   # DNSPod DoH
#    - tcp://119.29.29.29  # 阿里 DoH
  fake-ip-filter: # 微软系 APP 无法登陆使用等问题，通过添加 fake-ip-filter 解决
    # === Local ===
    - "*.lan"
    - "*.local"
    # === Microsoft Windows Serivice ===
    - "*.msftncsi.com"
    - "*.msftconnecttest.com"
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
      - 210.72.145.39/24

interface-name: wlan0
#ebpf:
#    redirect-to-tun:
#        - wlan0
tun:
  enable: true
  stack: system
  dns-hijack:
    - any:53
  auto-route: true

proxies:
  - name: 

proxy-groups:
  - name: 🔰 选择节点
    type: select
    proxies:
      - 🔄 自动测速
      - DIRECT
  - name: 🔄 自动测速
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 600
    proxies: 
        - DIRECT
  - name: 🎮 游戏节点
    type: select
    proxies:
      - DIRECT
  - name: 🐟 漏网之鱼
    type: select
    proxies:
      - DIRECT
      - PROXY
  - name: 🛑 广告拦截
    type: select
    proxies:
      - DIRECT
      - REJECT
      - PROXY
  - name: 高负载
    type: select
    proxies:
      - DIRECT
  - name: PROXY
    type: select
    proxies:
      - 🔰 选择节点
rules:
  #- DOMAIN,googleapis.com,PROXY
  - DOMAIN-KEYWORD,baidu,DIRECT
  #- DOMAIN,graph.microsoft.com,高负载
  #- DOMAIN,client.wns.windows.com,DIRECT
  #- DOMAIN,beige.xboxservices.com,PROXY
  #- DOMAIN,catalog.gamepass.com,PROXY
  #- DOMAIN,substrate.office.com,DIRECT
  #- DOMAIN,login.microsoftonline.com,DIRECT
  #- DOMAIN,self.events.data.microsoft,🛑 广告拦截
  #- DOMAIN-SUFFIX,time.windows.com,DIRECT
  #- DOMAIN-SUFFIX,googlevideo.com,PROXY
  #Nos
  #- DOMAIN-SUFFIX,iwara.tv,PROXY
#规则集
  - RULE-SET,directgame,DIRECT
  - RULE-SET,proxygame,🎮 游戏节点
  - RULE-SET,youtube,PROXY
  - RULE-SET,spotify,DIRECT
  - RULE-SET,douyin,DIRECT
  - RULE-SET,bilibili,DIRECT
  - RULE-SET,applications,DIRECT
  - RULE-SET,liteproxy,PROXY
  #- RULE-SET,private,DIRECT
  - RULE-SET,google,PROXY
  - RULE-SET,twitter,PROXY
  - RULE-SET,telegram,PROXY
  - RULE-SET,pixiv,PROXY
  - RULE-SET,cloudflare,PROXY
  - RULE-SET,reject,🛑 广告拦截
  - RULE-SET,advertising,🛑 广告拦截
  #- RULE-SET,direct,DIRECT
  #- RULE-SET,gfw,PROXY
  - GEOIP,CN,DIRECT
  - MATCH,🐟 漏网之鱼
proxy-providers: {}
rule-providers:
  reject:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt
    path: ./ruleset/reject.yaml
  telegram:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml
    path: ./ruleset/telegram.yaml
  #direct:
  #  type: http
  #  behavior: domain
  #  url: https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/direct.txt
  #  path: ./ruleset/direct.yaml
  youtube:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml
    path: ./ruleset/youtube.yaml
  google:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml
    path: ./ruleset/google.yaml
  #不同公司
  spotify:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml
    path: ./ruleset/spotify.yaml
  douyin:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/DouYin/DouYin.yaml
    path: ./ruleset/douyin.yaml
  bilibili:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml
    path: ./ruleset/private.yaml
  twitter:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.yaml
    path: ./ruleset/twitter.yaml
  cloudflare:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Cloudflare.yaml
    path: ./ruleset/twitter.yaml
  pixiv:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Pixiv/Pixiv.yaml
    path: ./ruleset/pixiv.yaml

  #gfw:
  #  type: http
  #  behavior: domain
  #  url: https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/gfw.txt
  #  path: ./ruleset/gfw.yaml
  proxygame:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/itKelis/Clash_Lite/main/ProxyGame.yaml
    path: ./ruleset/proxygame.yaml
  directgame:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/itKelis/Clash_Lite/main/DirectGame.yaml
    path: ./ruleset/directgame.yaml
  liteproxy:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/itKelis/Clash_Lite/main/Lite_proxy.yaml
    path: ./ruleset/liteproxy.yaml
  applications:
    type: http
    behavior: classical
    path: ./ruleset/applications.yaml
  advertising:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingLite/AdvertisingLite.yaml
    path: ./ruleset/Advertising.yaml
  rockstar:
    type: http
    behavior: domain
    path: ./ruleset/Rockstar.yaml
